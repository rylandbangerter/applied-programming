<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.7.29">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>index</title>
    <style>
        code {
            white-space: pre-wrap;
        }

        span.smallcaps {
            font-variant: small-caps;
        }

        div.columns {
            display: flex;
            gap: min(4vw, 1.5em);
        }

        div.column {
            flex: auto;
            overflow-x: auto;
        }

        div.hanging-indent {
            margin-left: 1.5em;
            text-indent: -1.5em;
        }

        ul.task-list {
            list-style: none;
        }

        ul.task-list li input[type="checkbox"] {
            width: 0.8em;
            margin: 0 0.8em 0.2em -1em;
            /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */
            vertical-align: middle;
        }

        /* CSS for syntax highlighting */
        html {
            -webkit-text-size-adjust: 100%;
        }

        pre>code.sourceCode {
            white-space: pre;
            position: relative;
        }

        pre>code.sourceCode>span {
            display: inline-block;
            line-height: 1.25;
        }

        pre>code.sourceCode>span:empty {
            height: 1.2em;
        }

        .sourceCode {
            overflow: visible;
        }

        code.sourceCode>span {
            color: inherit;
            text-decoration: inherit;
        }

        div.sourceCode {
            margin: 1em 0;
        }

        pre.sourceCode {
            margin: 0;
        }

        @media screen {
            div.sourceCode {
                overflow: auto;
            }
        }

        @media print {
            pre>code.sourceCode {
                white-space: pre-wrap;
            }

            pre>code.sourceCode>span {
                text-indent: -5em;
                padding-left: 5em;
            }
        }

        pre.numberSource code {
            counter-reset: source-line 0;
        }

        pre.numberSource code>span {
            position: relative;
            left: -4em;
            counter-increment: source-line;
        }

        pre.numberSource code>span>a:first-child::before {
            content: counter(source-line);
            position: relative;
            left: -1em;
            text-align: right;
            vertical-align: baseline;
            border: none;
            display: inline-block;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            padding: 0 4px;
            width: 4em;
        }

        pre.numberSource {
            margin-left: 3em;
            padding-left: 4px;
        }

        div.sourceCode {}

        @media screen {
            pre>code.sourceCode>span>a:first-child::before {
                text-decoration: underline;
            }
        }
    </style>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
        integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
        crossorigin="anonymous"></script>
    <script src="index_files/libs/clipboard/clipboard.min.js"></script>
    <script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
    <script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
    <script src="index_files/libs/quarto-html/popper.min.js"></script>
    <script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
    <script src="index_files/libs/quarto-html/anchor.min.js"></script>
    <link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
    <link href="index_files/libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css"
        rel="stylesheet" id="quarto-text-highlighting-styles">
    <script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
    <link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
    <link href="index_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet"
        append-hash="true" id="quarto-bootstrap" data-mode="light">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"
        integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg=="
        crossorigin="anonymous"></script>

    <script type="application/javascript">define('jquery', [], function () {return window.jQuery;})</script>


</head>

<body class="fullcontent quarto-light">

    <div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

        <main class="content" id="quarto-document-content">




            <p>title: “Machine Learning with Baseball Statistics”</p>
            <section id="overview" class="level2">
                <h2 class="anchored" data-anchor-id="overview">Overview</h2>
                <p>We did a total of three different models that all are able to make predictions to different levels of
                    success.</p>
            </section>
            <section id="model-1" class="level1">
                <h1>model 1</h1>
                <p>This model is able to successfully make predictions. Some of the predictions are quite close but
                    there is a bit of unpredictability in it so far. This model is predicting the WAR baseball stat
                    which shows the Wins Above Replacement which means how helpful they are to their team.</p>
                <div id="b2ffffd0" class="cell" data-execution_count="1">
                    <div class="sourceCode cell-code" id="cb1">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> pandas <span class="im">as</span> pd</span>
                                <span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">from</span> xgboost <span class="im">import</span>
                                    XGBRegressor</span>
                                <span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">from</span> sklearn.model_selection <span class="im">import</span>
                                    train_test_split</span>
                                <span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">from</span> sklearn.preprocessing <span class="im">import</span>
                                    LabelEncoder</span>
                                <span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Load the CSV</span></span>
                                <span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>df <span
                                        class="op">=</span> pd.read_csv(<span class="st">'baseball_stats.csv'</span>,
                                    encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
                                <span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Drop non-numeric or irrelevant columns (like names or awards for
                                        now)</span></span>
                                <span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>df <span
                                        class="op">=</span> df.drop([<span class="st">'Rk'</span>, <span
                                        class="st">'Player'</span>, <span class="st">'Team'</span>, <span
                                        class="st">'Lg'</span>, <span class="st">'Pos'</span>, <span
                                        class="st">'Awards'</span>], axis<span class="op">=</span><span
                                        class="dv">1</span>, errors<span class="op">=</span><span
                                        class="st">'ignore'</span>)</span>
                                <span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Optional: Encode any remaining non-numeric columns</span></span>
                                <span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">for</span> col <span class="kw">in</span> df.columns:</span>
                                <span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">if</span> df[col].dtype <span class="op">==</span> <span
                                        class="st">'object'</span>:</span>
                                <span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a> df[col] <span
                                        class="op">=</span> LabelEncoder().fit_transform(df[col])</span>
                                <span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Drop rows with missing values (simplest strategy)</span></span>
                                <span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>df <span
                                        class="op">=</span> df.dropna()</span>
                                <span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Separate features and target</span></span>
                                <span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>X <span
                                        class="op">=</span> df.drop(<span class="st">'WAR'</span>, axis<span
                                        class="op">=</span><span class="dv">1</span>)</span>
                                <span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>y <span
                                        class="op">=</span> df[<span class="st">'WAR'</span>]</span>
                                <span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Split data</span></span>
                                <span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>X_train,
                                    X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y,
                                    test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span
                                        class="op">=</span><span class="dv">42</span>)</span>
                                <span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Create and train model</span></span>
                                <span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>model <span
                                        class="op">=</span> XGBRegressor()</span>
                                <span id="cb1-29"><a href="#cb1-29" aria-hidden="true"
                                        tabindex="-1"></a>model.fit(X_train, y_train)</span>
                                <span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Predict</span></span>
                                <span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>predictions
                                    <span class="op">=</span> model.predict(X_test)</span>
                                <span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">for</span> i, prediction <span class="kw">in</span> <span
                                        class="bu">enumerate</span>(predictions):</span>
                                <span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"Prediction </span><span
                                        class="sc">{</span>i <span class="op">+</span> <span class="dv">1</span><span
                                        class="sc">}</span><span class="ss">: </span><span
                                        class="sc">{</span>prediction<span class="sc">:.2f}</span><span
                                        class="ss">"</span>)</span>
                                <span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"Actual </span><span
                                        class="sc">{</span>i <span class="op">+</span> <span class="dv">1</span><span
                                        class="sc">}</span><span class="ss">: </span><span
                                        class="sc">{</span>y_test<span class="sc">.</span>iloc[i]<span
                                        class="sc">:.2f}</span><span class="ss">"</span>)</span></code><button
                                title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-stdout">
                        <pre><code>Prediction 1: 0.48
                                Actual 1: 0.90
                                Prediction 2: 2.14
                                Actual 2: 3.30
                                Prediction 3: -0.41
                                Actual 3: -1.40
                                Prediction 4: 2.63
                                Actual 4: 2.60
                                Prediction 5: 0.75
                                Actual 5: 0.10
                                Prediction 6: 0.48
                                Actual 6: 0.20
                                Prediction 7: -0.34
                                Actual 7: -1.20
                                Prediction 8: 1.32
                                Actual 8: 0.40
                                Prediction 9: 2.28
                                Actual 9: 1.60
                                Prediction 10: -0.06
                                Actual 10: -0.10
                                Prediction 11: 3.19
                                Actual 11: 2.60
                                Prediction 12: 1.83
                                Actual 12: 0.80
                                Prediction 13: 0.49
                                Actual 13: 0.20
                                Prediction 14: 3.63
                                Actual 14: 4.00
                                Prediction 15: 1.74
                                Actual 15: 0.80
                                Prediction 16: 1.63
                                Actual 16: 1.70
                                Prediction 17: -0.41
                                Actual 17: 0.20
                                Prediction 18: 3.48
                                Actual 18: 0.80
                                Prediction 19: -0.40
                                Actual 19: -0.40
                                Prediction 20: -0.13
                                Actual 20: 1.40
                                Prediction 21: 0.11
                                Actual 21: 0.00
                                Prediction 22: 0.12
                                Actual 22: 0.00
                                Prediction 23: -0.54
                                Actual 23: -0.50
                                Prediction 24: -1.60
                                Actual 24: -1.10
                                Prediction 25: 5.48
                                Actual 25: 5.60
                                Prediction 26: -0.12
                                Actual 26: -0.80
                                Prediction 27: 0.27
                                Actual 27: 0.20
                                Prediction 28: 0.21
                                Actual 28: 1.30
                                Prediction 29: 1.16
                                Actual 29: 0.50
                                Prediction 30: -0.08
                                Actual 30: -0.10
                                Prediction 31: 0.05
                                Actual 31: 0.60
                                Prediction 32: 0.21
                                Actual 32: -0.10
                                Prediction 33: 0.96
                                Actual 33: 0.00
                                Prediction 34: 1.21
                                Actual 34: 0.00
                                Prediction 35: 8.13
                                Actual 35: 9.10
                                Prediction 36: 1.93
                                Actual 36: 0.80
                                Prediction 37: 1.70
                                Actual 37: 0.60
                                Prediction 38: 3.19
                                Actual 38: 2.70
                                Prediction 39: 2.52
                                Actual 39: 3.40
                                Prediction 40: 1.88
                                Actual 40: 4.70
                                Prediction 41: -0.60
                                Actual 41: 0.20
                                Prediction 42: 2.68
                                Actual 42: 1.20
                                Prediction 43: -0.64
                                Actual 43: -0.40
                                Prediction 44: 2.02
                                Actual 44: 2.10
                                Prediction 45: 2.53
                                Actual 45: 1.50
                                Prediction 46: 1.23
                                Actual 46: 1.10
                                Prediction 47: 6.23
                                Actual 47: 8.70
                                Prediction 48: 3.83
                                Actual 48: 3.60
                                Prediction 49: -1.16
                                Actual 49: -0.30
                                Prediction 50: 3.47
                                Actual 50: 1.00
                                Prediction 51: 0.89
                                Actual 51: 1.50
                                Prediction 52: 2.45
                                Actual 52: 2.60
                                Prediction 53: 3.41
                                Actual 53: 5.00
                                Prediction 54: 1.09
                                Actual 54: 0.60
                                Prediction 55: 0.55
                                Actual 55: 1.00
                                Prediction 56: 4.45
                                Actual 56: 4.90
                                Prediction 57: 2.04
                                Actual 57: 2.70
                                Prediction 58: 2.99
                                Actual 58: 3.40
                                Prediction 59: 0.08
                                Actual 59: -0.90
                                Prediction 60: 2.89
                                Actual 60: 4.30
                                Prediction 61: -0.14
                                Actual 61: 0.30
                                Prediction 62: 2.10
                                Actual 62: 0.70
                                Prediction 63: 0.02
                                Actual 63: 0.30
                                Prediction 64: -0.51
                                Actual 64: -0.40
                                Prediction 65: 1.46
                                Actual 65: -0.60
                                Prediction 66: 1.71
                                Actual 66: 1.70
                                Prediction 67: 0.24
                                Actual 67: 0.90
                                Prediction 68: 3.97
                                Actual 68: 3.70
                                Prediction 69: 1.18
                                Actual 69: 0.30
                                Prediction 70: 0.61
                                Actual 70: 0.30
                                Prediction 71: 2.72
                                Actual 71: 3.10
                                Prediction 72: -0.21
                                Actual 72: -0.70
                                Prediction 73: 0.50
                                Actual 73: 0.10
                                Prediction 74: -0.35
                                Actual 74: -0.90
                                Prediction 75: 0.89
                                Actual 75: 2.60
                                Prediction 76: 0.94
                                Actual 76: 0.70
                                Prediction 77: 1.32
                                Actual 77: 0.70
                                Prediction 78: 1.88
                                Actual 78: 0.80
                                Prediction 79: -0.57
                                Actual 79: -0.70
                                Prediction 80: -0.24
                                Actual 80: -1.10
                                Prediction 81: 1.14
                                Actual 81: 0.60
                                Prediction 82: 2.92
                                Actual 82: 1.30
                                Prediction 83: -0.28
                                Actual 83: -0.20
                                Prediction 84: -0.09
                                Actual 84: 0.20
                                Prediction 85: -0.01
                                Actual 85: 0.40
                                Prediction 86: 2.23
                                Actual 86: 5.10
                                Prediction 87: 0.84
                                Actual 87: 1.60
                                Prediction 88: -1.15
                                Actual 88: -1.50
                                Prediction 89: 0.09
                                Actual 89: 0.10
                                Prediction 90: 1.90
                                Actual 90: 0.60
                                Prediction 91: 1.74
                                Actual 91: 1.40
                                Prediction 92: -0.10
                                Actual 92: 0.10
                                Prediction 93: -0.41
                                Actual 93: 0.10
                                Prediction 94: -0.12
                                Actual 94: -0.50
                                Prediction 95: -0.61
                                Actual 95: 0.40
                                Prediction 96: 1.62
                                Actual 96: 2.20
                                Prediction 97: -0.06
                                Actual 97: -0.80
                                Prediction 98: 0.90
                                Actual 98: 0.20
                                Prediction 99: -0.28
                                Actual 99: -0.20
                                Prediction 100: 3.26
                                Actual 100: 3.10</code></pre>
                    </div>
                </div>
            </section>
            <section id="model-2" class="level1">
                <h1>model 2</h1>
                <p>This model predicts the stats that Shohei Ohtani will would have for his next game which came out to
                    be actually 2 AB, 2 R, 1 H, O HR, 0.299 AVG.</p>
                <div id="11184819" class="cell" data-execution_count="2">
                    <div class="sourceCode cell-code" id="cb3">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> pandas <span class="im">as</span> pd</span>
                                <span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> xgboost <span class="im">as</span> xgb</span>
                                <span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> math</span>
                                <span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">from</span> sklearn.metrics <span class="im">import</span>
                                    mean_squared_error, r2_score</span>
                                <span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 1. Load the data</span></span>
                                <span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>df <span
                                        class="op">=</span> pd.read_csv(<span class="st">"Shohei Ohtani Last
                                        Season.csv"</span>)</span>
                                <span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 2. Drop non-numeric or non-useful columns</span></span>
                                <span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Adjust as necessary based on your data</span></span>
                                <span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>df <span
                                        class="op">=</span> df.drop(columns<span class="op">=</span>[<span
                                        class="st">'Date'</span>, <span class="st">'OPP'</span>, <span
                                        class="st">'Team'</span>], errors<span class="op">=</span><span
                                        class="st">'ignore'</span>)</span>
                                <span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 3. Set target and features</span></span>
                                <span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>target_stats
                                    <span class="op">=</span> [<span class="st">'AB'</span>,<span
                                        class="st">'R'</span>,<span class="st">'H'</span>,<span
                                        class="st">'HR'</span>,<span class="st">'AVG'</span>] <span class="co"># AtBat,
                                        Runs, Hits, HomeRuns, AverageBattingScore</span></span>
                                <span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Clean data </span></span>
                                <span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>features <span
                                        class="op">=</span> df.drop(columns<span class="op">=</span>target_stats,
                                    errors<span class="op">=</span><span class="st">'ignore'</span>)</span>
                                <span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>features <span
                                        class="op">=</span> pd.get_dummies(features).fillna(<span
                                        class="dv">0</span>)</span>
                                <span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Create an Input for the next game</span></span>
                                <span id="cb3-25"><a href="#cb3-25" aria-hidden="true"
                                        tabindex="-1"></a>next_game_features <span class="op">=</span>
                                    features.mean().to_frame().T</span>
                                <span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Ensure the next game input matches the columns</span></span>
                                <span id="cb3-28"><a href="#cb3-28" aria-hidden="true"
                                        tabindex="-1"></a>next_game_features <span class="op">=</span>
                                    next_game_features[features.columns]</span>
                                <span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Run Calculations on Target Stats</span></span>
                                <span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span
                                        class="bu">print</span>(<span class="st">"Shohei Ohtani's Next Game
                                        Results</span><span class="ch">\n</span><span class="st">"</span>)</span>
                                <span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span
                                        class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span
                                        class="st">'Stat'</span><span class="sc">:&lt;10}</span><span class="ss">
                                    </span><span class="sc">{</span><span class="st">'Prediction'</span><span
                                        class="sc">:&gt;10}</span><span class="ss">"</span>)</span>
                                <span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span
                                        class="bu">print</span>(<span class="st">'-'</span> <span class="op">*</span>
                                    <span class="dv">21</span>)</span>
                                <span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">for</span> stat <span class="kw">in</span> target_stats:</span>
                                <span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">if</span> stat <span class="kw">not</span> <span class="kw">in</span>
                                    df.columns:</span>
                                <span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"X Stat '</span><span
                                        class="sc">{</span>stat<span class="sc">}</span><span class="ss">' not found.
                                        Skipping."</span>)</span>
                                <span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">continue</span></span>
                                <span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a> </span>
                                <span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># Drop Rows where the stat is missing</span></span>
                                <span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a> stat_df <span
                                        class="op">=</span> df[df[stat].notna()]</span>
                                <span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a> y <span
                                        class="op">=</span> stat_df[stat]</span>
                                <span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a> X <span
                                        class="op">=</span> features.loc[stat_df.index]</span>
                                <span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a> </span>
                                <span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># 4. Train XGBoost regressor</span></span>
                                <span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a> model <span
                                        class="op">=</span> xgb.XGBRegressor(objective<span class="op">=</span><span
                                        class="st">'reg:squarederror'</span>)</span>
                                <span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a> model.fit(X,
                                    y) </span>
                                <span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a> </span>
                                <span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># 5. Predict Hits in the next game</span></span>
                                <span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a> prediction
                                    <span class="op">=</span> model.predict(next_game_features)[<span
                                        class="dv">0</span>]</span>
                                <span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># 6. Print results</span></span>
                                <span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"</span><span
                                        class="sc">{</span>stat<span class="sc">:&lt;10}</span><span class="ss">
                                    </span><span class="sc">{</span>prediction<span class="sc">:.2f}</span><span
                                        class="ss">"</span>)</span>
                                <span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Evaluate model on training data</span></span>
                                <span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>train_preds
                                    <span class="op">=</span> model.predict(X)</span>
                                <span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>mse <span
                                        class="op">=</span> mean_squared_error(y, train_preds)</span>
                                <span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>r2 <span
                                        class="op">=</span> r2_score(y, train_preds)</span>
                                <span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span
                                        class="bu">print</span>(<span class="ss">f"Training MSE: </span><span
                                        class="sc">{</span>mse<span class="sc">:.2f}</span><span class="ss">, R-Squared:
                                    </span><span class="sc">{</span>r2<span class="sc">:.2f}</span><span
                                        class="ss">"</span>)</span></code><button title="Copy to Clipboard"
                                class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-stdout">
                        <pre><code>Shohei Ohtani's Next Game Results

                                Stat Prediction
                                ---------------------
                                AB 4.96
                                R 0.29
                                H 1.83
                                HR 0.00
                                AVG 0.32
                                Training MSE: 0.00, R-Squared: 1.00</code></pre>
                    </div>
                </div>
            </section>
            <section id="model-3" class="level1">
                <h1>model 3</h1>
                <p>This model makes very good predictions which are usually very close to the actual number. This model
                    is trying to predict the BA or the Batting Average for players overall stats for the year based on
                    all of the other measurables for the year.</p>
                <div id="88970ece" class="cell" data-execution_count="3">
                    <div class="sourceCode cell-code" id="cb5">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> pandas <span class="im">as</span> pd</span>
                                <span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">from</span> sklearn.model_selection <span class="im">import</span>
                                    train_test_split</span>
                                <span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> xgboost <span class="im">as</span> xgb</span>
                                <span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Import relevant metrics</span></span>
                                <span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">from</span> sklearn.metrics <span class="im">import</span>
                                    mean_squared_error, r2_score, accuracy_score, classification_report</span>
                                <span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 1. Load Data</span></span>
                                <span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">try</span>:</span>
                                <span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a> df <span
                                        class="op">=</span> pd.read_csv(<span class="st">'baseball_stats.csv'</span>,
                                    encoding<span class="op">=</span><span class="st">'windows-1252'</span>)</span>
                                <span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a> df <span
                                        class="op">=</span> df.drop(columns<span class="op">=</span>[<span
                                        class="st">'Player'</span>, <span class="st">'Team'</span>, <span
                                        class="st">'Lg'</span>, <span class="st">'WAR'</span>, <span
                                        class="st">'Pos'</span>, <span class="st">'Awards'</span>])</span>
                                <span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
                                <span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="st">"Error: CSV file not
                                        found."</span>)</span>
                                <span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a> exit()</span>
                                <span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-15"><a href="#cb5-15" aria-hidden="true"
                                        tabindex="-1"></a>target_column_index <span class="op">=</span> <span
                                        class="dv">15</span></span>
                                <span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 2. Identify Features (X) and Target (y)</span></span>
                                <span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">if</span> target_column_index <span class="op">&gt;=</span> <span
                                        class="bu">len</span>(df.columns):</span>
                                <span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"Error: Column at index </span><span
                                        class="sc">{</span>target_column_index<span class="sc">}</span><span class="ss">
                                        does not exist."</span>)</span>
                                <span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a> exit()</span>
                                <span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>y <span
                                        class="op">=</span> df.iloc[:, target_column_index] <span class="co"># Target
                                        variable (the 19th column)</span></span>
                                <span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># All other columns as features</span></span>
                                <span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>X <span
                                        class="op">=</span> df.drop(df.columns[target_column_index], axis<span
                                        class="op">=</span><span class="dv">1</span>)</span>
                                <span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 3. Split Data into Training and Testing Sets</span></span>
                                <span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>X_train,
                                    X_test, y_train, y_test <span class="op">=</span> train_test_split(</span>
                                <span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># You can adjust test_size and random_state</span></span>
                                <span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a> X, y,
                                    test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span
                                        class="op">=</span><span class="dv">42</span>)</span>
                                <span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 4. Initialize and Train the XGBoost Model</span></span>
                                <span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Determine if it's a regression or classification task based on the
                                        target variable</span></span>
                                <span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">if</span> pd.api.types.is_numeric_dtype(y):</span>
                                <span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># Regression task</span></span>
                                <span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># Or other regression objectives</span></span>
                                <span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a> model <span
                                        class="op">=</span> xgb.XGBRegressor(objective<span class="op">=</span><span
                                        class="st">'reg:squarederror'</span>)</span>
                                <span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>
                                    model.fit(X_train, y_train)</span>
                                <span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">else</span>:</span>
                                <span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># Classification task</span></span>
                                <span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># You might need to handle class imbalances or multi-class
                                        scenarios</span></span>
                                <span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a> model <span
                                        class="op">=</span> xgb.XGBClassifier(objective<span class="op">=</span><span
                                        class="st">'multi:softmax'</span> <span class="cf">if</span> y.nunique(</span>
                                <span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a> ) <span
                                        class="op">&gt;</span> <span class="dv">2</span> <span class="cf">else</span>
                                    <span class="st">'binary:logistic'</span>) <span class="co"># Or other
                                        classification objectives</span></span>
                                <span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>
                                    model.fit(X_train, y_train)</span>
                                <span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 4.5 Save the model</span></span>
                                <span id="cb5-46"><a href="#cb5-46" aria-hidden="true"
                                        tabindex="-1"></a>model.save_model(<span
                                        class="st">"initial_model.json"</span>)</span>
                                <span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 5. Make Predictions on the Test Set</span></span>
                                <span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>predictions
                                    <span class="op">=</span> model.predict(X_test)</span>
                                <span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">for</span> i, prediction <span class="kw">in</span> <span
                                        class="bu">enumerate</span>(predictions):</span>
                                <span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"Prediction </span><span
                                        class="sc">{</span>i <span class="op">+</span> <span class="dv">1</span><span
                                        class="sc">}</span><span class="ss">: </span><span
                                        class="sc">{</span>prediction<span class="sc">:.2f}</span><span
                                        class="ss">"</span>)</span>
                                <span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"Actual </span><span
                                        class="sc">{</span>i <span class="op">+</span> <span class="dv">1</span><span
                                        class="sc">}</span><span class="ss">: </span><span
                                        class="sc">{</span>y_test<span class="sc">.</span>iloc[i]<span
                                        class="sc">:.2f}</span><span class="ss">"</span>)</span>
                                <span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># 6. Evaluate the Model</span></span>
                                <span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a><span
                                        class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span
                                        class="st">--- Model Evaluation ---"</span>)</span>
                                <span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">if</span> pd.api.types.is_numeric_dtype(y):</span>
                                <span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># Regression metrics</span></span>
                                <span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a> mse <span
                                        class="op">=</span> mean_squared_error(y_test, predictions)</span>
                                <span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a> r2 <span
                                        class="op">=</span> r2_score(y_test, predictions)</span>
                                <span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"Mean Squared Error: </span><span
                                        class="sc">{</span>mse<span class="sc">:.4f}</span><span
                                        class="ss">"</span>)</span>
                                <span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"R-squared: </span><span
                                        class="sc">{</span>r2<span class="sc">:.4f}</span><span
                                        class="ss">"</span>)</span>
                                <span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a><span
                                        class="cf">else</span>:</span>
                                <span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># Classification metrics</span></span>
                                <span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a> accuracy <span
                                        class="op">=</span> accuracy_score(y_test, predictions)</span>
                                <span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a> report <span
                                        class="op">=</span> classification_report(y_test, predictions)</span>
                                <span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="ss">f"Accuracy: </span><span
                                        class="sc">{</span>accuracy<span class="sc">:.4f}</span><span
                                        class="ss">"</span>)</span>
                                <span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a> <span
                                        class="bu">print</span>(<span class="st">"Classification Report:</span><span
                                        class="ch">\n</span><span class="st">"</span>, report)</span></code><button
                                title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-stdout">
                        <pre><code>Prediction 1: 0.20
                                Actual 1: 0.20
                                Prediction 2: 0.29
                                Actual 2: 0.30
                                Prediction 3: 0.20
                                Actual 3: 0.20
                                Prediction 4: 0.23
                                Actual 4: 0.23
                                Prediction 5: 0.27
                                Actual 5: 0.24
                                Prediction 6: 0.26
                                Actual 6: 0.26
                                Prediction 7: 0.21
                                Actual 7: 0.21
                                Prediction 8: 0.25
                                Actual 8: 0.26
                                Prediction 9: 0.28
                                Actual 9: 0.28
                                Prediction 10: 0.17
                                Actual 10: 0.20
                                Prediction 11: 0.25
                                Actual 11: 0.24
                                Prediction 12: 0.22
                                Actual 12: 0.22
                                Prediction 13: 0.26
                                Actual 13: 0.24
                                Prediction 14: 0.26
                                Actual 14: 0.26
                                Prediction 15: 0.27
                                Actual 15: 0.28
                                Prediction 16: 0.27
                                Actual 16: 0.30
                                Prediction 17: 0.19
                                Actual 17: 0.19
                                Prediction 18: 0.25
                                Actual 18: 0.25
                                Prediction 19: 0.17
                                Actual 19: 0.15
                                Prediction 20: 0.23
                                Actual 20: 0.24
                                Prediction 21: 0.23
                                Actual 21: 0.23
                                Prediction 22: 0.28
                                Actual 22: 0.26
                                Prediction 23: 0.23
                                Actual 23: 0.24
                                Prediction 24: 0.19
                                Actual 24: 0.18
                                Prediction 25: 0.27
                                Actual 25: 0.29
                                Prediction 26: 0.20
                                Actual 26: 0.18
                                Prediction 27: 0.25
                                Actual 27: 0.27
                                Prediction 28: 0.23
                                Actual 28: 0.22
                                Prediction 29: 0.26
                                Actual 29: 0.25
                                Prediction 30: 0.24
                                Actual 30: 0.23
                                Prediction 31: 0.20
                                Actual 31: 0.20
                                Prediction 32: 0.20
                                Actual 32: 0.19
                                Prediction 33: 0.26
                                Actual 33: 0.25
                                Prediction 34: 0.25
                                Actual 34: 0.27
                                Prediction 35: 0.28
                                Actual 35: 0.28
                                Prediction 36: 0.27
                                Actual 36: 0.28
                                Prediction 37: 0.25
                                Actual 37: 0.24
                                Prediction 38: 0.26
                                Actual 38: 0.26
                                Prediction 39: 0.26
                                Actual 39: 0.25
                                Prediction 40: 0.24
                                Actual 40: 0.22
                                Prediction 41: 0.21
                                Actual 41: 0.20
                                Prediction 42: 0.27
                                Actual 42: 0.27
                                Prediction 43: 0.20
                                Actual 43: 0.17
                                Prediction 44: 0.24
                                Actual 44: 0.23
                                Prediction 45: 0.23
                                Actual 45: 0.23
                                Prediction 46: 0.23
                                Actual 46: 0.22
                                Prediction 47: 0.28
                                Actual 47: 0.28
                                Prediction 48: 0.26
                                Actual 48: 0.28
                                Prediction 49: 0.20
                                Actual 49: 0.21
                                Prediction 50: 0.29
                                Actual 50: 0.31
                                Prediction 51: 0.28
                                Actual 51: 0.27
                                Prediction 52: 0.25
                                Actual 52: 0.23
                                Prediction 53: 0.27
                                Actual 53: 0.28
                                Prediction 54: 0.23
                                Actual 54: 0.23
                                Prediction 55: 0.26
                                Actual 55: 0.27
                                Prediction 56: 0.26
                                Actual 56: 0.27
                                Prediction 57: 0.25
                                Actual 57: 0.24
                                Prediction 58: 0.24
                                Actual 58: 0.23
                                Prediction 59: 0.22
                                Actual 59: 0.21
                                Prediction 60: 0.27
                                Actual 60: 0.27
                                Prediction 61: 0.23
                                Actual 61: 0.23
                                Prediction 62: 0.27
                                Actual 62: 0.27
                                Prediction 63: 0.23
                                Actual 63: 0.24
                                Prediction 64: 0.17
                                Actual 64: 0.18
                                Prediction 65: 0.21
                                Actual 65: 0.20
                                Prediction 66: 0.24
                                Actual 66: 0.22
                                Prediction 67: 0.27
                                Actual 67: 0.23
                                Prediction 68: 0.28
                                Actual 68: 0.27
                                Prediction 69: 0.23
                                Actual 69: 0.23
                                Prediction 70: 0.26
                                Actual 70: 0.22
                                Prediction 71: 0.33
                                Actual 71: 0.33
                                Prediction 72: 0.21
                                Actual 72: 0.21
                                Prediction 73: 0.25
                                Actual 73: 0.19
                                Prediction 74: 0.23
                                Actual 74: 0.24
                                Prediction 75: 0.25
                                Actual 75: 0.25
                                Prediction 76: 0.22
                                Actual 76: 0.23
                                Prediction 77: 0.24
                                Actual 77: 0.24
                                Prediction 78: 0.22
                                Actual 78: 0.23
                                Prediction 79: 0.20
                                Actual 79: 0.19
                                Prediction 80: 0.22
                                Actual 80: 0.21
                                Prediction 81: 0.26
                                Actual 81: 0.26
                                Prediction 82: 0.25
                                Actual 82: 0.25
                                Prediction 83: 0.22
                                Actual 83: 0.22
                                Prediction 84: 0.25
                                Actual 84: 0.26
                                Prediction 85: 0.23
                                Actual 85: 0.23
                                Prediction 86: 0.26
                                Actual 86: 0.25
                                Prediction 87: 0.25
                                Actual 87: 0.24
                                Prediction 88: 0.18
                                Actual 88: 0.21
                                Prediction 89: 0.21
                                Actual 89: 0.19
                                Prediction 90: 0.25
                                Actual 90: 0.25
                                Prediction 91: 0.23
                                Actual 91: 0.22
                                Prediction 92: 0.21
                                Actual 92: 0.23
                                Prediction 93: 0.21
                                Actual 93: 0.20
                                Prediction 94: 0.23
                                Actual 94: 0.23
                                Prediction 95: 0.20
                                Actual 95: 0.20
                                Prediction 96: 0.23
                                Actual 96: 0.24
                                Prediction 97: 0.24
                                Actual 97: 0.24
                                Prediction 98: 0.24
                                Actual 98: 0.25
                                Prediction 99: 0.10
                                Actual 99: 0.20
                                Prediction 100: 0.26
                                Actual 100: 0.25

                                --- Model Evaluation ---
                                Mean Squared Error: 0.0003
                                R-squared: 0.7068</code></pre>
                    </div>
                </div>
            </section>
            <section id="cleaning-the-data" class="level1">
                <h1>Cleaning the data</h1>
                <p>The rest of the sections show what we did in our research about cleaning data.</p>
                <div id="3fc8b0bb" class="cell" data-execution_count="4">
                    <div class="sourceCode cell-code" id="cb7">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> pandas <span class="im">as</span> pd</span>
                                <span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span
                                        class="im">import</span> re</span>
                                <span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Read in the CSV file</span></span>
                                <span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>baseball_stats
                                    <span class="op">=</span> pd.read_csv(<span class="st">'baseball_stats.csv'</span>,
                                    encoding_errors <span class="op">=</span><span class="st">"ignore"</span>)</span>
                                <span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Display the first few rows of the dataframe</span></span>
                                <span id="cb7-8"><a href="#cb7-8" aria-hidden="true"
                                        tabindex="-1"></a>baseball_stats.head()</span></code><button
                                title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-display" data-execution_count="4">
                        <div>


                            <table class="dataframe caption-top table table-sm table-striped small"
                                data-quarto-postprocess="true" data-border="1">
                                <thead>
                                    <tr class="header">
                                        <th data-quarto-table-cell-role="th"></th>
                                        <th data-quarto-table-cell-role="th">Rk</th>
                                        <th data-quarto-table-cell-role="th">Player</th>
                                        <th data-quarto-table-cell-role="th">Age</th>
                                        <th data-quarto-table-cell-role="th">Team</th>
                                        <th data-quarto-table-cell-role="th">Lg</th>
                                        <th data-quarto-table-cell-role="th">WAR</th>
                                        <th data-quarto-table-cell-role="th">G</th>
                                        <th data-quarto-table-cell-role="th">PA</th>
                                        <th data-quarto-table-cell-role="th">AB</th>
                                        <th data-quarto-table-cell-role="th">R</th>
                                        <th data-quarto-table-cell-role="th">...</th>
                                        <th data-quarto-table-cell-role="th">rOBA</th>
                                        <th data-quarto-table-cell-role="th">Rbat+</th>
                                        <th data-quarto-table-cell-role="th">TB</th>
                                        <th data-quarto-table-cell-role="th">GIDP</th>
                                        <th data-quarto-table-cell-role="th">HBP</th>
                                        <th data-quarto-table-cell-role="th">SH</th>
                                        <th data-quarto-table-cell-role="th">SF</th>
                                        <th data-quarto-table-cell-role="th">IBB</th>
                                        <th data-quarto-table-cell-role="th">Pos</th>
                                        <th data-quarto-table-cell-role="th">Awards</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">0</td>
                                        <td>1</td>
                                        <td>Jarren Duran</td>
                                        <td>27</td>
                                        <td>BOS</td>
                                        <td>AL</td>
                                        <td>8.7</td>
                                        <td>160</td>
                                        <td>735</td>
                                        <td>671</td>
                                        <td>111</td>
                                        <td>...</td>
                                        <td>0.373</td>
                                        <td>134</td>
                                        <td>330</td>
                                        <td>6</td>
                                        <td>6</td>
                                        <td>1</td>
                                        <td>3</td>
                                        <td>1</td>
                                        <td>87</td>
                                        <td>AS,MVP-8</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">1</td>
                                        <td>2</td>
                                        <td>Shohei Ohtani</td>
                                        <td>29</td>
                                        <td>LAD</td>
                                        <td>NL</td>
                                        <td>9.2</td>
                                        <td>159</td>
                                        <td>731</td>
                                        <td>636</td>
                                        <td>134</td>
                                        <td>...</td>
                                        <td>0.449</td>
                                        <td>190</td>
                                        <td>411</td>
                                        <td>7</td>
                                        <td>6</td>
                                        <td>0</td>
                                        <td>5</td>
                                        <td>10</td>
                                        <td>D</td>
                                        <td>AS,MVP-1,SS</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">2</td>
                                        <td>3</td>
                                        <td>Gunnar Henderson</td>
                                        <td>23</td>
                                        <td>BAL</td>
                                        <td>AL</td>
                                        <td>9.1</td>
                                        <td>159</td>
                                        <td>719</td>
                                        <td>630</td>
                                        <td>118</td>
                                        <td>...</td>
                                        <td>0.385</td>
                                        <td>157</td>
                                        <td>333</td>
                                        <td>2</td>
                                        <td>7</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>6/D</td>
                                        <td>AS,MVP-4</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">3</td>
                                        <td>4</td>
                                        <td>Marcus Semien</td>
                                        <td>33</td>
                                        <td>TEX</td>
                                        <td>AL</td>
                                        <td>4.1</td>
                                        <td>159</td>
                                        <td>718</td>
                                        <td>650</td>
                                        <td>101</td>
                                        <td>...</td>
                                        <td>0.310</td>
                                        <td>100</td>
                                        <td>254</td>
                                        <td>9</td>
                                        <td>3</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>4</td>
                                        <td>AS</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">4</td>
                                        <td>5</td>
                                        <td>Juan Soto</td>
                                        <td>25</td>
                                        <td>NYY</td>
                                        <td>AL</td>
                                        <td>7.9</td>
                                        <td>157</td>
                                        <td>713</td>
                                        <td>576</td>
                                        <td>128</td>
                                        <td>...</td>
                                        <td>0.424</td>
                                        <td>179</td>
                                        <td>328</td>
                                        <td>10</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>2</td>
                                        <td>9/7DH</td>
                                        <td>AS,MVP-3,SS</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p>5 rows × 34 columns</p>
                        </div>
                    </div>
                </div>
                <p>Removing the team and league columns.</p>
                <div id="e0eb4f3a" class="cell" data-execution_count="5">
                    <div class="sourceCode cell-code" id="cb8">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>stats <span
                                        class="op">=</span> baseball_stats.drop(columns <span class="op">=</span>[<span
                                        class="st">'Team'</span>, <span class="st">'Lg'</span>])</span>
                                <span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>stats</span>
                                <span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># baseball_stats.query('Player == "Jos
                                        Tena*"')</span></span></code><button title="Copy to Clipboard"
                                class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-display" data-execution_count="5">
                        <div>


                            <table class="dataframe caption-top table table-sm table-striped small"
                                data-quarto-postprocess="true" data-border="1">
                                <thead>
                                    <tr class="header">
                                        <th data-quarto-table-cell-role="th"></th>
                                        <th data-quarto-table-cell-role="th">Rk</th>
                                        <th data-quarto-table-cell-role="th">Player</th>
                                        <th data-quarto-table-cell-role="th">Age</th>
                                        <th data-quarto-table-cell-role="th">WAR</th>
                                        <th data-quarto-table-cell-role="th">G</th>
                                        <th data-quarto-table-cell-role="th">PA</th>
                                        <th data-quarto-table-cell-role="th">AB</th>
                                        <th data-quarto-table-cell-role="th">R</th>
                                        <th data-quarto-table-cell-role="th">H</th>
                                        <th data-quarto-table-cell-role="th">2B</th>
                                        <th data-quarto-table-cell-role="th">...</th>
                                        <th data-quarto-table-cell-role="th">rOBA</th>
                                        <th data-quarto-table-cell-role="th">Rbat+</th>
                                        <th data-quarto-table-cell-role="th">TB</th>
                                        <th data-quarto-table-cell-role="th">GIDP</th>
                                        <th data-quarto-table-cell-role="th">HBP</th>
                                        <th data-quarto-table-cell-role="th">SH</th>
                                        <th data-quarto-table-cell-role="th">SF</th>
                                        <th data-quarto-table-cell-role="th">IBB</th>
                                        <th data-quarto-table-cell-role="th">Pos</th>
                                        <th data-quarto-table-cell-role="th">Awards</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">0</td>
                                        <td>1</td>
                                        <td>Jarren Duran</td>
                                        <td>27</td>
                                        <td>8.7</td>
                                        <td>160</td>
                                        <td>735</td>
                                        <td>671</td>
                                        <td>111</td>
                                        <td>191</td>
                                        <td>48</td>
                                        <td>...</td>
                                        <td>0.373</td>
                                        <td>134</td>
                                        <td>330</td>
                                        <td>6</td>
                                        <td>6</td>
                                        <td>1</td>
                                        <td>3</td>
                                        <td>1</td>
                                        <td>87</td>
                                        <td>AS,MVP-8</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">1</td>
                                        <td>2</td>
                                        <td>Shohei Ohtani</td>
                                        <td>29</td>
                                        <td>9.2</td>
                                        <td>159</td>
                                        <td>731</td>
                                        <td>636</td>
                                        <td>134</td>
                                        <td>197</td>
                                        <td>38</td>
                                        <td>...</td>
                                        <td>0.449</td>
                                        <td>190</td>
                                        <td>411</td>
                                        <td>7</td>
                                        <td>6</td>
                                        <td>0</td>
                                        <td>5</td>
                                        <td>10</td>
                                        <td>D</td>
                                        <td>AS,MVP-1,SS</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">2</td>
                                        <td>3</td>
                                        <td>Gunnar Henderson</td>
                                        <td>23</td>
                                        <td>9.1</td>
                                        <td>159</td>
                                        <td>719</td>
                                        <td>630</td>
                                        <td>118</td>
                                        <td>177</td>
                                        <td>31</td>
                                        <td>...</td>
                                        <td>0.385</td>
                                        <td>157</td>
                                        <td>333</td>
                                        <td>2</td>
                                        <td>7</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>6/D</td>
                                        <td>AS,MVP-4</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">3</td>
                                        <td>4</td>
                                        <td>Marcus Semien</td>
                                        <td>33</td>
                                        <td>4.1</td>
                                        <td>159</td>
                                        <td>718</td>
                                        <td>650</td>
                                        <td>101</td>
                                        <td>154</td>
                                        <td>27</td>
                                        <td>...</td>
                                        <td>0.310</td>
                                        <td>100</td>
                                        <td>254</td>
                                        <td>9</td>
                                        <td>3</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>4</td>
                                        <td>AS</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">4</td>
                                        <td>5</td>
                                        <td>Juan Soto</td>
                                        <td>25</td>
                                        <td>7.9</td>
                                        <td>157</td>
                                        <td>713</td>
                                        <td>576</td>
                                        <td>128</td>
                                        <td>166</td>
                                        <td>31</td>
                                        <td>...</td>
                                        <td>0.424</td>
                                        <td>179</td>
                                        <td>328</td>
                                        <td>10</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>2</td>
                                        <td>9/7DH</td>
                                        <td>AS,MVP-3,SS</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">495</td>
                                        <td>388</td>
                                        <td>Nick Loftin</td>
                                        <td>25</td>
                                        <td>0.2</td>
                                        <td>56</td>
                                        <td>171</td>
                                        <td>148</td>
                                        <td>15</td>
                                        <td>28</td>
                                        <td>4</td>
                                        <td>...</td>
                                        <td>0.258</td>
                                        <td>56</td>
                                        <td>35</td>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>45H/3D71</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">496</td>
                                        <td>389</td>
                                        <td>angel Martinez</td>
                                        <td>22</td>
                                        <td>0.1</td>
                                        <td>43</td>
                                        <td>169</td>
                                        <td>151</td>
                                        <td>16</td>
                                        <td>35</td>
                                        <td>7</td>
                                        <td>...</td>
                                        <td>0.286</td>
                                        <td>80</td>
                                        <td>51</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>87/9H5D4</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">497</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>0.2</td>
                                        <td>44</td>
                                        <td>168</td>
                                        <td>161</td>
                                        <td>14</td>
                                        <td>43</td>
                                        <td>5</td>
                                        <td>...</td>
                                        <td>0.290</td>
                                        <td>81</td>
                                        <td>57</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>5/4DH</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">498</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>-0.1</td>
                                        <td>3</td>
                                        <td>4</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>...</td>
                                        <td>0.000</td>
                                        <td>-124</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>/5DH</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">499</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>0.3</td>
                                        <td>41</td>
                                        <td>164</td>
                                        <td>157</td>
                                        <td>14</td>
                                        <td>43</td>
                                        <td>5</td>
                                        <td>...</td>
                                        <td>0.297</td>
                                        <td>86</td>
                                        <td>57</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>4-May</td>
                                        <td>NaN</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p>500 rows × 32 columns</p>
                        </div>
                    </div>
                </div>
                <p>Changing the position and awards columns into numbers Awards: MVP, GG, SS, AS GG, SS, AS are all in a
                    boolean format. 0 if they didn’t get it and 1 if they did MVP is numbered by the number that comes
                    after it, ex: MVP-9, MVP-12, etc.</p>
                <div id="05f3eaad" class="cell" data-execution_count="6">
                    <div class="sourceCode cell-code" id="cb9">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>stats[<span
                                        class="st">'GG'</span>] <span class="op">=</span> stats[<span
                                        class="st">'Awards'</span>].<span class="bu">str</span>.contains(<span
                                        class="st">'GG'</span>, na<span class="op">=</span><span
                                        class="va">False</span>).astype(<span class="bu">int</span>)</span>
                                <span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>stats[<span
                                        class="st">'AS'</span>] <span class="op">=</span> stats[<span
                                        class="st">'Awards'</span>].<span class="bu">str</span>.contains(<span
                                        class="st">'AS'</span>, na<span class="op">=</span><span
                                        class="va">False</span>).astype(<span class="bu">int</span>)</span>
                                <span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>stats[<span
                                        class="st">'SS'</span>] <span class="op">=</span> stats[<span
                                        class="st">'Awards'</span>].<span class="bu">str</span>.contains(<span
                                        class="st">'SS'</span>, na<span class="op">=</span><span
                                        class="va">False</span>).astype(<span class="bu">int</span>)</span>
                                <span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Add MVP ranking column</span></span>
                                <span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span
                                        class="kw">def</span> extract_mvp_rank(awards):</span>
                                <span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">if</span> pd.isna(awards):</span>
                                <span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">return</span> <span class="va">None</span></span>
                                <span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a> match <span
                                        class="op">=</span> re.search(<span class="vs">r'MVP-</span><span
                                        class="kw">(</span><span class="dv">\d</span><span class="op">+</span><span
                                        class="kw">)</span><span class="vs">'</span>, awards)</span>
                                <span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">return</span> <span class="bu">int</span>(match.group(<span
                                        class="dv">1</span>)) <span class="cf">if</span> match <span
                                        class="cf">else</span> <span class="va">None</span></span>
                                <span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>stats[<span
                                        class="st">'MVP'</span>] <span class="op">=</span> stats[<span
                                        class="st">'Awards'</span>].<span
                                        class="bu">apply</span>(extract_mvp_rank)</span>
                                <span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>stats <span
                                        class="op">=</span> stats.drop(columns<span class="op">=</span>[<span
                                        class="st">'Awards'</span>])</span>
                                <span id="cb9-15"><a href="#cb9-15" aria-hidden="true"
                                        tabindex="-1"></a>stats</span></code><button title="Copy to Clipboard"
                                class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-display" data-execution_count="6">
                        <div>


                            <table class="dataframe caption-top table table-sm table-striped small"
                                data-quarto-postprocess="true" data-border="1">
                                <thead>
                                    <tr class="header">
                                        <th data-quarto-table-cell-role="th"></th>
                                        <th data-quarto-table-cell-role="th">Rk</th>
                                        <th data-quarto-table-cell-role="th">Player</th>
                                        <th data-quarto-table-cell-role="th">Age</th>
                                        <th data-quarto-table-cell-role="th">WAR</th>
                                        <th data-quarto-table-cell-role="th">G</th>
                                        <th data-quarto-table-cell-role="th">PA</th>
                                        <th data-quarto-table-cell-role="th">AB</th>
                                        <th data-quarto-table-cell-role="th">R</th>
                                        <th data-quarto-table-cell-role="th">H</th>
                                        <th data-quarto-table-cell-role="th">2B</th>
                                        <th data-quarto-table-cell-role="th">...</th>
                                        <th data-quarto-table-cell-role="th">GIDP</th>
                                        <th data-quarto-table-cell-role="th">HBP</th>
                                        <th data-quarto-table-cell-role="th">SH</th>
                                        <th data-quarto-table-cell-role="th">SF</th>
                                        <th data-quarto-table-cell-role="th">IBB</th>
                                        <th data-quarto-table-cell-role="th">Pos</th>
                                        <th data-quarto-table-cell-role="th">GG</th>
                                        <th data-quarto-table-cell-role="th">AS</th>
                                        <th data-quarto-table-cell-role="th">SS</th>
                                        <th data-quarto-table-cell-role="th">MVP</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">0</td>
                                        <td>1</td>
                                        <td>Jarren Duran</td>
                                        <td>27</td>
                                        <td>8.7</td>
                                        <td>160</td>
                                        <td>735</td>
                                        <td>671</td>
                                        <td>111</td>
                                        <td>191</td>
                                        <td>48</td>
                                        <td>...</td>
                                        <td>6</td>
                                        <td>6</td>
                                        <td>1</td>
                                        <td>3</td>
                                        <td>1</td>
                                        <td>87</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>8.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">1</td>
                                        <td>2</td>
                                        <td>Shohei Ohtani</td>
                                        <td>29</td>
                                        <td>9.2</td>
                                        <td>159</td>
                                        <td>731</td>
                                        <td>636</td>
                                        <td>134</td>
                                        <td>197</td>
                                        <td>38</td>
                                        <td>...</td>
                                        <td>7</td>
                                        <td>6</td>
                                        <td>0</td>
                                        <td>5</td>
                                        <td>10</td>
                                        <td>D</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1.0</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">2</td>
                                        <td>3</td>
                                        <td>Gunnar Henderson</td>
                                        <td>23</td>
                                        <td>9.1</td>
                                        <td>159</td>
                                        <td>719</td>
                                        <td>630</td>
                                        <td>118</td>
                                        <td>177</td>
                                        <td>31</td>
                                        <td>...</td>
                                        <td>2</td>
                                        <td>7</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>6/D</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>4.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">3</td>
                                        <td>4</td>
                                        <td>Marcus Semien</td>
                                        <td>33</td>
                                        <td>4.1</td>
                                        <td>159</td>
                                        <td>718</td>
                                        <td>650</td>
                                        <td>101</td>
                                        <td>154</td>
                                        <td>27</td>
                                        <td>...</td>
                                        <td>9</td>
                                        <td>3</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">4</td>
                                        <td>5</td>
                                        <td>Juan Soto</td>
                                        <td>25</td>
                                        <td>7.9</td>
                                        <td>157</td>
                                        <td>713</td>
                                        <td>576</td>
                                        <td>128</td>
                                        <td>166</td>
                                        <td>31</td>
                                        <td>...</td>
                                        <td>10</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>2</td>
                                        <td>9/7DH</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>3.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">495</td>
                                        <td>388</td>
                                        <td>Nick Loftin</td>
                                        <td>25</td>
                                        <td>0.2</td>
                                        <td>56</td>
                                        <td>171</td>
                                        <td>148</td>
                                        <td>15</td>
                                        <td>28</td>
                                        <td>4</td>
                                        <td>...</td>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>45H/3D71</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">496</td>
                                        <td>389</td>
                                        <td>angel Martinez</td>
                                        <td>22</td>
                                        <td>0.1</td>
                                        <td>43</td>
                                        <td>169</td>
                                        <td>151</td>
                                        <td>16</td>
                                        <td>35</td>
                                        <td>7</td>
                                        <td>...</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>87/9H5D4</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">497</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>0.2</td>
                                        <td>44</td>
                                        <td>168</td>
                                        <td>161</td>
                                        <td>14</td>
                                        <td>43</td>
                                        <td>5</td>
                                        <td>...</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>5/4DH</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">498</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>-0.1</td>
                                        <td>3</td>
                                        <td>4</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>...</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>/5DH</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">499</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>0.3</td>
                                        <td>41</td>
                                        <td>164</td>
                                        <td>157</td>
                                        <td>14</td>
                                        <td>43</td>
                                        <td>5</td>
                                        <td>...</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>4-May</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p>500 rows × 35 columns</p>
                        </div>
                    </div>
                </div>
                <p>changing the position column into numbers</p>
                <div id="abb5d881" class="cell" data-execution_count="7">
                    <div class="sourceCode cell-code" id="cb10">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>position_map
                                    <span class="op">=</span> {</span>
                                <span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a> <span
                                        class="st">'1'</span>: <span class="dv">1</span>, <span class="st">'2'</span>:
                                    <span class="dv">2</span>, <span class="st">'3'</span>: <span class="dv">3</span>,
                                    <span class="st">'4'</span>: <span class="dv">4</span>, <span class="st">'5'</span>:
                                    <span class="dv">5</span>,</span>
                                <span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a> <span
                                        class="st">'6'</span>: <span class="dv">6</span>, <span class="st">'7'</span>:
                                    <span class="dv">7</span>, <span class="st">'8'</span>: <span class="dv">8</span>,
                                    <span class="st">'9'</span>: <span class="dv">9</span></span>
                                <span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>}</span>
                                <span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Function to extract the primary numeric position</span></span>
                                <span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span
                                        class="kw">def</span> extract_primary_position(pos_string):</span>
                                <span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">if</span> pd.isna(pos_string):</span>
                                <span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">return</span> <span class="va">None</span></span>
                                <span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a> <span
                                        class="co"># Find all digits 1-9</span></span>
                                <span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a> digits <span
                                        class="op">=</span> re.findall(<span class="vs">r'</span><span
                                        class="pp">[1-9]</span><span class="vs">'</span>, pos_string)</span>
                                <span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">if</span> <span class="kw">not</span> digits:</span>
                                <span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">return</span> <span class="va">None</span></span>
                                <span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a> <span
                                        class="cf">return</span> position_map[digits[<span class="dv">0</span>]] <span
                                        class="co"># Return the first valid position number</span></span>
                                <span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Apply the function to the 'Pos' column</span></span>
                                <span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>stats[<span
                                        class="st">'Position'</span>] <span class="op">=</span> stats[<span
                                        class="st">'Pos'</span>].<span
                                        class="bu">apply</span>(extract_primary_position)</span>
                                <span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>stats <span
                                        class="op">=</span> stats.drop(columns<span class="op">=</span>[<span
                                        class="st">'Pos'</span>])</span>
                                <span id="cb10-19"><a href="#cb10-19" aria-hidden="true"
                                        tabindex="-1"></a>stats</span></code><button title="Copy to Clipboard"
                                class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-display" data-execution_count="7">
                        <div>


                            <table class="dataframe caption-top table table-sm table-striped small"
                                data-quarto-postprocess="true" data-border="1">
                                <thead>
                                    <tr class="header">
                                        <th data-quarto-table-cell-role="th"></th>
                                        <th data-quarto-table-cell-role="th">Rk</th>
                                        <th data-quarto-table-cell-role="th">Player</th>
                                        <th data-quarto-table-cell-role="th">Age</th>
                                        <th data-quarto-table-cell-role="th">WAR</th>
                                        <th data-quarto-table-cell-role="th">G</th>
                                        <th data-quarto-table-cell-role="th">PA</th>
                                        <th data-quarto-table-cell-role="th">AB</th>
                                        <th data-quarto-table-cell-role="th">R</th>
                                        <th data-quarto-table-cell-role="th">H</th>
                                        <th data-quarto-table-cell-role="th">2B</th>
                                        <th data-quarto-table-cell-role="th">...</th>
                                        <th data-quarto-table-cell-role="th">GIDP</th>
                                        <th data-quarto-table-cell-role="th">HBP</th>
                                        <th data-quarto-table-cell-role="th">SH</th>
                                        <th data-quarto-table-cell-role="th">SF</th>
                                        <th data-quarto-table-cell-role="th">IBB</th>
                                        <th data-quarto-table-cell-role="th">GG</th>
                                        <th data-quarto-table-cell-role="th">AS</th>
                                        <th data-quarto-table-cell-role="th">SS</th>
                                        <th data-quarto-table-cell-role="th">MVP</th>
                                        <th data-quarto-table-cell-role="th">Position</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">0</td>
                                        <td>1</td>
                                        <td>Jarren Duran</td>
                                        <td>27</td>
                                        <td>8.7</td>
                                        <td>160</td>
                                        <td>735</td>
                                        <td>671</td>
                                        <td>111</td>
                                        <td>191</td>
                                        <td>48</td>
                                        <td>...</td>
                                        <td>6</td>
                                        <td>6</td>
                                        <td>1</td>
                                        <td>3</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>8.0</td>
                                        <td>8.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">1</td>
                                        <td>2</td>
                                        <td>Shohei Ohtani</td>
                                        <td>29</td>
                                        <td>9.2</td>
                                        <td>159</td>
                                        <td>731</td>
                                        <td>636</td>
                                        <td>134</td>
                                        <td>197</td>
                                        <td>38</td>
                                        <td>...</td>
                                        <td>7</td>
                                        <td>6</td>
                                        <td>0</td>
                                        <td>5</td>
                                        <td>10</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1.0</td>
                                        <td>NaN</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">2</td>
                                        <td>3</td>
                                        <td>Gunnar Henderson</td>
                                        <td>23</td>
                                        <td>9.1</td>
                                        <td>159</td>
                                        <td>719</td>
                                        <td>630</td>
                                        <td>118</td>
                                        <td>177</td>
                                        <td>31</td>
                                        <td>...</td>
                                        <td>2</td>
                                        <td>7</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>4.0</td>
                                        <td>6.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">3</td>
                                        <td>4</td>
                                        <td>Marcus Semien</td>
                                        <td>33</td>
                                        <td>4.1</td>
                                        <td>159</td>
                                        <td>718</td>
                                        <td>650</td>
                                        <td>101</td>
                                        <td>154</td>
                                        <td>27</td>
                                        <td>...</td>
                                        <td>9</td>
                                        <td>3</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                        <td>4.0</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">4</td>
                                        <td>5</td>
                                        <td>Juan Soto</td>
                                        <td>25</td>
                                        <td>7.9</td>
                                        <td>157</td>
                                        <td>713</td>
                                        <td>576</td>
                                        <td>128</td>
                                        <td>166</td>
                                        <td>31</td>
                                        <td>...</td>
                                        <td>10</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>4</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>3.0</td>
                                        <td>9.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                        <td>...</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">495</td>
                                        <td>388</td>
                                        <td>Nick Loftin</td>
                                        <td>25</td>
                                        <td>0.2</td>
                                        <td>56</td>
                                        <td>171</td>
                                        <td>148</td>
                                        <td>15</td>
                                        <td>28</td>
                                        <td>4</td>
                                        <td>...</td>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                        <td>4.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">496</td>
                                        <td>389</td>
                                        <td>angel Martinez</td>
                                        <td>22</td>
                                        <td>0.1</td>
                                        <td>43</td>
                                        <td>169</td>
                                        <td>151</td>
                                        <td>16</td>
                                        <td>35</td>
                                        <td>7</td>
                                        <td>...</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                        <td>8.0</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">497</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>0.2</td>
                                        <td>44</td>
                                        <td>168</td>
                                        <td>161</td>
                                        <td>14</td>
                                        <td>43</td>
                                        <td>5</td>
                                        <td>...</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                        <td>5.0</td>
                                    </tr>
                                    <tr class="even">
                                        <td data-quarto-table-cell-role="th">498</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>-0.1</td>
                                        <td>3</td>
                                        <td>4</td>
                                        <td>4</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>...</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                        <td>5.0</td>
                                    </tr>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">499</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>0.3</td>
                                        <td>41</td>
                                        <td>164</td>
                                        <td>157</td>
                                        <td>14</td>
                                        <td>43</td>
                                        <td>5</td>
                                        <td>...</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                        <td>4.0</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p>500 rows × 35 columns</p>
                        </div>
                    </div>
                </div>
                <p>Eliminating duplicate player rows.</p>
                <div id="ae5a527c" class="cell" data-execution_count="8">
                    <div class="sourceCode cell-code" id="cb11">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Group by 'Player' and find the maximum value of the 'GG'
                                        column</span></span>
                                <span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>max_g <span
                                        class="op">=</span> stats.groupby(<span class="st">'Player'</span>,
                                    as_index<span class="op">=</span><span class="va">False</span>)[<span
                                        class="st">'G'</span>].<span class="bu">max</span>()</span>
                                <span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Merge the maximum 'GG' values back to the original DataFrame to
                                        filter rows</span></span>
                                <span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>merged_data
                                    <span class="op">=</span> stats.merge(max_g, on<span class="op">=</span>[<span
                                        class="st">'Player'</span>, <span class="st">'G'</span>])</span>
                                <span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Drop duplicates if necessary</span></span>
                                <span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>merged_data
                                    <span class="op">=</span> merged_data.drop_duplicates()</span>
                                <span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
                                <span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Query for a specific player (e.g., "Jos Tena*")</span></span>
                                <span id="cb11-11"><a href="#cb11-11" aria-hidden="true"
                                        tabindex="-1"></a>merged_data.query(<span class="st">'Player == "Jose
                                        Tena"'</span>)</span></code><button title="Copy to Clipboard"
                                class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                    <div class="cell-output cell-output-display" data-execution_count="8">
                        <div>


                            <table class="dataframe caption-top table table-sm table-striped small"
                                data-quarto-postprocess="true" data-border="1">
                                <thead>
                                    <tr class="header">
                                        <th data-quarto-table-cell-role="th"></th>
                                        <th data-quarto-table-cell-role="th">Rk</th>
                                        <th data-quarto-table-cell-role="th">Player</th>
                                        <th data-quarto-table-cell-role="th">Age</th>
                                        <th data-quarto-table-cell-role="th">WAR</th>
                                        <th data-quarto-table-cell-role="th">G</th>
                                        <th data-quarto-table-cell-role="th">PA</th>
                                        <th data-quarto-table-cell-role="th">AB</th>
                                        <th data-quarto-table-cell-role="th">R</th>
                                        <th data-quarto-table-cell-role="th">H</th>
                                        <th data-quarto-table-cell-role="th">2B</th>
                                        <th data-quarto-table-cell-role="th">...</th>
                                        <th data-quarto-table-cell-role="th">GIDP</th>
                                        <th data-quarto-table-cell-role="th">HBP</th>
                                        <th data-quarto-table-cell-role="th">SH</th>
                                        <th data-quarto-table-cell-role="th">SF</th>
                                        <th data-quarto-table-cell-role="th">IBB</th>
                                        <th data-quarto-table-cell-role="th">GG</th>
                                        <th data-quarto-table-cell-role="th">AS</th>
                                        <th data-quarto-table-cell-role="th">SS</th>
                                        <th data-quarto-table-cell-role="th">MVP</th>
                                        <th data-quarto-table-cell-role="th">Position</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="odd">
                                        <td data-quarto-table-cell-role="th">389</td>
                                        <td>390</td>
                                        <td>Jose Tena</td>
                                        <td>23</td>
                                        <td>0.2</td>
                                        <td>44</td>
                                        <td>168</td>
                                        <td>161</td>
                                        <td>14</td>
                                        <td>43</td>
                                        <td>5</td>
                                        <td>...</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>NaN</td>
                                        <td>5.0</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p>1 rows × 35 columns</p>
                        </div>
                    </div>
                </div>
                <p>Makes a new cleaner CSV file out of the cleaned data.</p>
                <div id="55ab3449" class="cell" data-execution_count="9">
                    <div class="sourceCode cell-code" id="cb12">
                        <pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span
                                    id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span
                                        class="co"># Save the merged_data DataFrame to a CSV file</span></span>
                                <span id="cb12-2"><a href="#cb12-2" aria-hidden="true"
                                        tabindex="-1"></a>merged_data.to_csv(<span
                                        class="st">'merged_baseball_stats.csv'</span>, index<span
                                        class="op">=</span><span class="va">False</span>)</span></code><button
                                title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
                    </div>
                </div>
            </section>

        </main>
        <!-- /main column -->
        <script id="quarto-html-after-body" type="application/javascript">
            window.document.addEventListener("DOMContentLoaded", function (event) {
                const icon = "";
                const anchorJS = new window.AnchorJS();
                anchorJS.options = {
                    placement: 'right',
                    icon: icon
                };
                anchorJS.add('.anchored');
                const isCodeAnnotation = (el) => {
                    for (const clz of el.classList) {
                        if (clz.startsWith('code-annotation-')) {
                            return true;
                        }
                    }
                    return false;
                }
                const onCopySuccess = function (e) {
                    // button target
                    const button = e.trigger;
                    // don't keep focus
                    button.blur();
                    // flash "checked"
                    button.classList.add('code-copy-button-checked');
                    var currentTitle = button.getAttribute("title");
                    button.setAttribute("title", "Copied!");
                    let tooltip;
                    if (window.bootstrap) {
                        button.setAttribute("data-bs-toggle", "tooltip");
                        button.setAttribute("data-bs-placement", "left");
                        button.setAttribute("data-bs-title", "Copied!");
                        tooltip = new bootstrap.Tooltip(button,
                            {
                                trigger: "manual",
                                customClass: "code-copy-button-tooltip",
                                offset: [0, -8]
                            });
                        tooltip.show();
                    }
                    setTimeout(function () {
                        if (tooltip) {
                            tooltip.hide();
                            button.removeAttribute("data-bs-title");
                            button.removeAttribute("data-bs-toggle");
                            button.removeAttribute("data-bs-placement");
                        }
                        button.setAttribute("title", currentTitle);
                        button.classList.remove('code-copy-button-checked');
                    }, 1000);
                    // clear code selection
                    e.clearSelection();
                }
                const getTextToCopy = function (trigger) {
                    const codeEl = trigger.previousElementSibling.cloneNode(true);
                    for (const childEl of codeEl.children) {
                        if (isCodeAnnotation(childEl)) {
                            childEl.remove();
                        }
                    }
                    return codeEl.innerText;
                }
                const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
                    text: getTextToCopy
                });
                clipboard.on('success', onCopySuccess);
                if (window.document.getElementById('quarto-embedded-source-code-modal')) {
                    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
                        text: getTextToCopy,
                        container: window.document.getElementById('quarto-embedded-source-code-modal')
                    });
                    clipboardModal.on('success', onCopySuccess);
                }
                var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
                var mailtoRegex = new RegExp(/^mailto:/);
                var filterRegex = new RegExp('/' + window.location.host + '/');
                var isInternal = (href) => {
                    return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
                }
                // Inspect non-navigation links and adorn them if external
                var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
                for (var i = 0; i < links.length; i++) {
                    const link = links[i];
                    if (!isInternal(link.href)) {
                        // undo the damage that might have been done by quarto-nav.js in the case of
                        // links that we want to consider external
                        if (link.dataset.originalHref !== undefined) {
                            link.href = link.dataset.originalHref;
                        }
                    }
                }
                function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
                    const config = {
                        allowHTML: true,
                        maxWidth: 500,
                        delay: 100,
                        arrow: false,
                        appendTo: function (el) {
                            return el.parentElement;
                        },
                        interactive: true,
                        interactiveBorder: 10,
                        theme: 'quarto',
                        placement: 'bottom-start',
                    };
                    if (contentFn) {
                        config.content = contentFn;
                    }
                    if (onTriggerFn) {
                        config.onTrigger = onTriggerFn;
                    }
                    if (onUntriggerFn) {
                        config.onUntrigger = onUntriggerFn;
                    }
                    window.tippy(el, config);
                }
                const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
                for (var i = 0; i < noterefs.length; i++) {
                    const ref = noterefs[i];
                    tippyHover(ref, function () {
                        // use id or data attribute instead here
                        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
                        try {href = new URL(href).hash;} catch { }
                        const id = href.replace(/^#\/?/, "");
                        const note = window.document.getElementById(id);
                        if (note) {
                            return note.innerHTML;
                        } else {
                            return "";
                        }
                    });
                }
                const xrefs = window.document.querySelectorAll('a.quarto-xref');
                const processXRef = (id, note) => {
                    // Strip column container classes
                    const stripColumnClz = (el) => {
                        el.classList.remove("page-full", "page-columns");
                        if (el.children) {
                            for (const child of el.children) {
                                stripColumnClz(child);
                            }
                        }
                    }
                    stripColumnClz(note)
                    if (id === null || id.startsWith('sec-')) {
                        // Special case sections, only their first couple elements
                        const container = document.createElement("div");
                        if (note.children && note.children.length > 2) {
                            container.appendChild(note.children[0].cloneNode(true));
                            for (let i = 1; i < note.children.length; i++) {
                                const child = note.children[i];
                                if (child.tagName === "P" && child.innerText === "") {
                                    continue;
                                } else {
                                    container.appendChild(child.cloneNode(true));
                                    break;
                                }
                            }
                            if (window.Quarto?.typesetMath) {
                                window.Quarto.typesetMath(container);
                            }
                            return container.innerHTML
                        } else {
                            if (window.Quarto?.typesetMath) {
                                window.Quarto.typesetMath(note);
                            }
                            return note.innerHTML;
                        }
                    } else {
                        // Remove any anchor links if they are present
                        const anchorLink = note.querySelector('a.anchorjs-link');
                        if (anchorLink) {
                            anchorLink.remove();
                        }
                        if (window.Quarto?.typesetMath) {
                            window.Quarto.typesetMath(note);
                        }
                        if (note.classList.contains("callout")) {
                            return note.outerHTML;
                        } else {
                            return note.innerHTML;
                        }
                    }
                }
                for (var i = 0; i < xrefs.length; i++) {
                    const xref = xrefs[i];
                    tippyHover(xref, undefined, function (instance) {
                        instance.disable();
                        let url = xref.getAttribute('href');
                        let hash = undefined;
                        if (url.startsWith('#')) {
                            hash = url;
                        } else {
                            try {hash = new URL(url).hash;} catch { }
                        }
                        if (hash) {
                            const id = hash.replace(/^#\/?/, "");
                            const note = window.document.getElementById(id);
                            if (note !== null) {
                                try {
                                    const html = processXRef(id, note.cloneNode(true));
                                    instance.setContent(html);
                                } finally {
                                    instance.enable();
                                    instance.show();
                                }
                            } else {
                                // See if we can fetch this
                                fetch(url.split('#')[0])
                                    .then(res => res.text())
                                    .then(html => {
                                        const parser = new DOMParser();
                                        const htmlDoc = parser.parseFromString(html, "text/html");
                                        const note = htmlDoc.getElementById(id);
                                        if (note !== null) {
                                            const html = processXRef(id, note);
                                            instance.setContent(html);
                                        }
                                    }).finally(() => {
                                        instance.enable();
                                        instance.show();
                                    });
                            }
                        } else {
                            // See if we can fetch a full url (with no hash to target)
                            // This is a special case and we should probably do some content thinning / targeting
                            fetch(url)
                                .then(res => res.text())
                                .then(html => {
                                    const parser = new DOMParser();
                                    const htmlDoc = parser.parseFromString(html, "text/html");
                                    const note = htmlDoc.querySelector('main.content');
                                    if (note !== null) {
                                        // This should only happen for chapter cross references
                                        // (since there is no id in the URL)
                                        // remove the first header
                                        if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                                            note.children[0].remove();
                                        }
                                        const html = processXRef(null, note);
                                        instance.setContent(html);
                                    }
                                }).finally(() => {
                                    instance.enable();
                                    instance.show();
                                });
                        }
                    }, function (instance) {
                    });
                }
                let selectedAnnoteEl;
                const selectorForAnnotation = (cell, annotation) => {
                    let cellAttr = 'data-code-cell="' + cell + '"';
                    let lineAttr = 'data-code-annotation="' + annotation + '"';
                    const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
                    return selector;
                }
                const selectCodeLines = (annoteEl) => {
                    const doc = window.document;
                    const targetCell = annoteEl.getAttribute("data-target-cell");
                    const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
                    const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                    const lines = annoteSpan.getAttribute("data-code-lines").split(",");
                    const lineIds = lines.map((line) => {
                        return targetCell + "-" + line;
                    })
                    let top = null;
                    let height = null;
                    let parent = null;
                    if (lineIds.length > 0) {
                        //compute the position of the single el (top and bottom and make a div)
                        const el = window.document.getElementById(lineIds[0]);
                        top = el.offsetTop;
                        height = el.offsetHeight;
                        parent = el.parentElement.parentElement;
                        if (lineIds.length > 1) {
                            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                            height = bottom - top;
                        }
                        if (top !== null && height !== null && parent !== null) {
                            // cook up a div (if necessary) and position it 
                            let div = window.document.getElementById("code-annotation-line-highlight");
                            if (div === null) {
                                div = window.document.createElement("div");
                                div.setAttribute("id", "code-annotation-line-highlight");
                                div.style.position = 'absolute';
                                parent.appendChild(div);
                            }
                            div.style.top = top - 2 + "px";
                            div.style.height = height + 4 + "px";
                            div.style.left = 0;
                            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                            if (gutterDiv === null) {
                                gutterDiv = window.document.createElement("div");
                                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                                gutterDiv.style.position = 'absolute';
                                const codeCell = window.document.getElementById(targetCell);
                                const gutter = codeCell.querySelector('.code-annotation-gutter');
                                gutter.appendChild(gutterDiv);
                            }
                            gutterDiv.style.top = top - 2 + "px";
                            gutterDiv.style.height = height + 4 + "px";
                        }
                        selectedAnnoteEl = annoteEl;
                    }
                };
                const unselectCodeLines = () => {
                    const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
                    elementsIds.forEach((elId) => {
                        const div = window.document.getElementById(elId);
                        if (div) {
                            div.remove();
                        }
                    });
                    selectedAnnoteEl = undefined;
                };
                // Handle positioning of the toggle
                window.addEventListener(
                    "resize",
                    throttle(() => {
                        elRect = undefined;
                        if (selectedAnnoteEl) {
                            selectCodeLines(selectedAnnoteEl);
                        }
                    }, 10)
                );
                function throttle(fn, ms) {
                    let throttle = false;
                    let timer;
                    return (...args) => {
                        if (!throttle) { // first call gets through
                            fn.apply(this, args);
                            throttle = true;
                        } else { // all the others get throttled
                            if (timer) clearTimeout(timer); // cancel #2
                            timer = setTimeout(() => {
                                fn.apply(this, args);
                                timer = throttle = false;
                            }, ms);
                        }
                    };
                }
                // Attach click handler to the DT
                const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
                for (const annoteDlNode of annoteDls) {
                    annoteDlNode.addEventListener('click', (event) => {
                        const clickedEl = event.target;
                        if (clickedEl !== selectedAnnoteEl) {
                            unselectCodeLines();
                            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
                            if (activeEl) {
                                activeEl.classList.remove('code-annotation-active');
                            }
                            selectCodeLines(clickedEl);
                            clickedEl.classList.add('code-annotation-active');
                        } else {
                            // Unselect the line
                            unselectCodeLines();
                            clickedEl.classList.remove('code-annotation-active');
                        }
                    });
                }
                const findCites = (el) => {
                    const parentEl = el.parentElement;
                    if (parentEl) {
                        const cites = parentEl.dataset.cites;
                        if (cites) {
                            return {
                                el,
                                cites: cites.split(' ')
                            };
                        } else {
                            return findCites(el.parentElement)
                        }
                    } else {
                        return undefined;
                    }
                };
                var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
                for (var i = 0; i < bibliorefs.length; i++) {
                    const ref = bibliorefs[i];
                    const citeInfo = findCites(ref);
                    if (citeInfo) {
                        tippyHover(citeInfo.el, function () {
                            var popup = window.document.createElement('div');
                            citeInfo.cites.forEach(function (cite) {
                                var citeDiv = window.document.createElement('div');
                                citeDiv.classList.add('hanging-indent');
                                citeDiv.classList.add('csl-entry');
                                var biblioDiv = window.document.getElementById('ref-' + cite);
                                if (biblioDiv) {
                                    citeDiv.innerHTML = biblioDiv.innerHTML;
                                }
                                popup.appendChild(citeDiv);
                            });
                            return popup.innerHTML;
                        });
                    }
                }
            });
        </script>
    </div> <!-- /content -->




</body>

</html>
